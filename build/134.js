"use strict";(self.webpackChunkrrze_video=self.webpackChunkrrze_video||[]).push([[134,888],{134:(e,t,s)=>{s.r(t),s.d(t,{VimeoProvider:()=>c});var i=s(603),r=s(477),n=s(487),o=s(888);s(196);const a=["bufferend","bufferstart","durationchange","ended","enterpictureinpicture","error","fullscreenchange","leavepictureinpicture","loaded","playProgress","loadProgress","pause","play","playbackratechange","qualitychange","seeked","seeking","timeupdate","volumechange","waiting"];class c extends n.w{$$PROVIDER_TYPE="VIMEO";scope=(0,i.createScope)();fullscreen;#e;#t=(0,i.signal)("");#s=(0,i.signal)(!1);#i=null;#r=null;#n=!1;#o=new r.tn(0,0);#a=new r.LK(this.#c.bind(this));#h=null;#d=null;#l=new Map;#u=null;constructor(e,t){super(e),this.#e=t;const s=this;this.fullscreen={get active(){return s.#n},supported:!0,enter:()=>this.#p("requestFullscreen"),exit:()=>this.#p("exitFullscreen")}}cookies=!1;title=!0;byline=!0;portrait=!0;color="00ADEF";get type(){return"vimeo"}get currentSrc(){return this.#r}get videoId(){return this.#t()}get hash(){return this.#i}get isPro(){return this.#s()}preconnect(){(0,r.$P)(this.getOrigin())}setup(){super.setup(),(0,i.effect)(this.#f.bind(this)),(0,i.effect)(this.#g.bind(this)),(0,i.effect)(this.#m.bind(this)),this.#e.notify("provider-setup",this)}destroy(){this.#y(),this.fullscreen=void 0;for(const e of this.#l.values())for(const{reject:t}of e)t("provider destroyed");this.#l.clear(),this.#p("destroy")}async play(){return this.#p("play")}async pause(){return this.#p("pause")}setMuted(e){this.#p("setMuted",e)}setCurrentTime(e){this.#p("seekTo",e),this.#e.notify("seeking",e)}setVolume(e){this.#p("setVolume",e),this.#p("setMuted",(0,i.peek)(this.#e.$state.muted))}setPlaybackRate(e){this.#p("setPlaybackRate",e)}async loadSource(e){if(!(0,i.isString)(e.src))return this.#r=null,this.#i=null,void this.#t.set("");const{videoId:t,hash:s}=(0,o.resolveVimeoVideoId)(e.src);this.#t.set(t??""),this.#i=s??null,this.#r=e}#f(){this.#y();const e=this.#t();e?(this.src.set(`${this.getOrigin()}/video/${e}`),this.#e.notify("load-start")):this.src.set("")}#g(){const e=this.#t();if(!e)return;const t=(0,i.deferredPromise)(),s=new AbortController;return this.#u=t,(0,o.getVimeoVideoInfo)(e,s,this.#i).then((e=>{t.resolve(e)})).catch((e=>{t.reject()})),()=>{t.reject(),s.abort()}}#m(){const e=this.#s(),{$state:t,qualities:s}=this.#e;if(t.canSetPlaybackRate.set(e),s[r.HV.setReadonly](!e),e)return(0,i.listenEvent)(s,"change",(()=>{if(s.auto)return;const e=s.selected?.id;e&&this.#p("setQuality",e)}))}getOrigin(){return"https://player.vimeo.com"}buildParams(){const{keyDisabled:e}=this.#e.$props,{playsInline:t,nativeControls:s}=this.#e.$state,i=s();return{title:this.title,byline:this.byline,color:this.color,portrait:this.portrait,controls:i,h:this.hash,keyboard:i&&!e(),transparent:!0,playsinline:t(),dnt:!this.cookies}}#c(){this.#p("getCurrentTime")}#v=!1;#b(e,t){if(this.#v&&0===e)return;const{realCurrentTime:s,realDuration:i,paused:r,bufferedEnd:n}=this.#e.$state;if(s()===e)return;const o=s();this.#e.notify("time-change",e,t),Math.abs(o-e)>1.5&&(this.#e.notify("seeking",e,t),!r()&&n()<e&&this.#e.notify("waiting",void 0,t)),i()-e<.01&&(this.#e.notify("end",void 0,t),this.#v=!0,setTimeout((()=>{this.#v=!1}),500))}#k(e,t){this.#e.notify("seeked",e,t)}#x(e){const t=this.#t();this.#u?.promise.then((t=>{if(!t)return;const{title:s,poster:i,duration:r,pro:n}=t;this.#s.set(n),this.#e.notify("title-change",s,e),this.#e.notify("poster-change",i,e),this.#e.notify("duration-change",r,e),this.#w(r,e)})).catch((()=>{t===this.#t()&&(this.#p("getVideoTitle"),this.#p("getDuration"))}))}#w(e,t){const{nativeControls:s}=this.#e.$state,i=s();this.#o=new r.tn(0,e);const n={buffered:new r.tn(0,0),seekable:this.#o,duration:e};this.#e.delegate.ready(n,t),i||this.#p("_hideOverlay"),this.#p("getQualities"),this.#p("getChapters")}#P(e,t,s){switch(e){case"getVideoTitle":const e=t;this.#e.notify("title-change",e,s);break;case"getDuration":const r=t;this.#e.$state.canPlay()?this.#e.notify("duration-change",r,s):this.#w(r,s);break;case"getCurrentTime":this.#b(t,s);break;case"getBuffered":(0,i.isArray)(t)&&t.length&&this.#C(t[t.length-1][1],s);break;case"setMuted":this.#I((0,i.peek)(this.#e.$state.volume),t,s);break;case"getChapters":this.#T(t);break;case"getQualities":this.#V(t,s)}this.#R(e)?.resolve()}#$(){for(const e of a)this.#p("addEventListener",e)}#A(e){this.#a.stop(),this.#e.notify("pause",void 0,e)}#M(e){this.#a.start(),this.#e.notify("play",void 0,e)}#S(e){const{paused:t}=this.#e.$state;t()||this.#v||this.#e.notify("playing",void 0,e)}#C(e,t){const s={buffered:new r.tn(0,e),seekable:this.#o};this.#e.notify("progress",s,t)}#E(e){this.#e.notify("waiting",void 0,e)}#L(e){const{paused:t}=this.#e.$state;t()||this.#e.notify("playing",void 0,e)}#q(e){const{paused:t}=this.#e.$state;t()&&this.#e.notify("play",void 0,e),this.#e.notify("waiting",void 0,e)}#I(e,t,s){const i={volume:e,muted:t};this.#e.notify("volume-change",i,s)}#T(e){if(this.#Q(),!e.length)return;const t=new r.n8({kind:"chapters",default:!0}),{realDuration:s}=this.#e.$state;for(let i=0;i<e.length;i++){const r=e[i],n=e[i+1];t.addCue(new window.VTTCue(r.startTime,n?.startTime??s(),r.title))}this.#d=t,this.#e.textTracks.add(t)}#Q(){this.#d&&(this.#e.textTracks.remove(this.#d),this.#d=null)}#V(e,t){this.#e.qualities[r.WX.enableAuto]=e.some((e=>"auto"===e.id))?()=>this.#p("setQuality","auto"):void 0;for(const s of e){if("auto"===s.id)continue;const e=+s.id.slice(0,-1);isNaN(e)||this.#e.qualities[r.HV.add]({id:s.id,width:e*(16/9),height:e,codec:"avc1,h.264",bitrate:-1},t)}this.#F(e.find((e=>e.active)),t)}#F({id:e}={},t){if(!e)return;const s="auto"===e,i=this.#e.qualities.getById(e);s?(this.#e.qualities[r.WX.setAuto](s,t),this.#e.qualities[r.HV.select](void 0,!0,t)):this.#e.qualities[r.HV.select](i??void 0,!0,t)}#O(e,t,s){switch(e){case"ready":this.#$();break;case"loaded":this.#x(s);break;case"play":this.#M(s);break;case"playProgress":this.#S(s);break;case"pause":this.#A(s);break;case"loadProgress":this.#C(t.seconds,s);break;case"waiting":this.#q(s);break;case"bufferstart":this.#E(s);break;case"bufferend":this.#L(s);break;case"volumechange":this.#I(t.volume,(0,i.peek)(this.#e.$state.muted),s);break;case"durationchange":this.#o=new r.tn(0,t.duration),this.#e.notify("duration-change",t.duration,s);break;case"playbackratechange":this.#e.notify("rate-change",t.playbackRate,s);break;case"qualitychange":this.#F(t,s);break;case"fullscreenchange":this.#n=t.fullscreen,this.#e.notify("fullscreen-change",t.fullscreen,s);break;case"enterpictureinpicture":this.#e.notify("picture-in-picture-change",!0,s);break;case"leavepictureinpicture":this.#e.notify("picture-in-picture-change",!1,s);break;case"ended":this.#e.notify("end",void 0,s);break;case"error":this.#W(t,s);break;case"seek":case"seeked":this.#k(t.seconds,s)}}#W(e,t){const{message:s,method:i}=e;"setPlaybackRate"===i&&this.#s.set(!1),i&&this.#R(i)?.reject(s)}onMessage(e,t){e.event?this.#O(e.event,e.data,t):e.method&&this.#P(e.method,e.value,t)}onLoad(){}async#p(e,t){let s=(0,i.deferredPromise)(),r=this.#l.get(e);return r||this.#l.set(e,r=[]),r.push(s),this.postMessage({method:e,value:t}),s.promise}#y(){this.#a.stop(),this.#o=new r.tn(0,0),this.#u=null,this.#h=null,this.#s.set(!1),this.#Q()}#R(e){return this.#l.get(e)?.shift()}}},487:(e,t,s)=>{s.d(t,{w:()=>n});var i=s(477),r=s(603);class n{#_;src=(0,r.signal)("");referrerPolicy=null;get iframe(){return this.#_}constructor(e){this.#_=e,e.setAttribute("frameBorder","0"),e.setAttribute("aria-hidden","true"),e.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),null!==this.referrerPolicy&&e.setAttribute("referrerpolicy",this.referrerPolicy)}setup(){(0,r.listenEvent)(window,"message",this.#B.bind(this)),(0,r.listenEvent)(this.#_,"load",this.onLoad.bind(this)),(0,r.effect)(this.#D.bind(this))}#D(){const e=this.src();if(!e.length)return void this.#_.setAttribute("src","");const t=(0,r.peek)((()=>this.buildParams()));this.#_.setAttribute("src",(0,i.nQ)(e,t))}postMessage(e,t){i.W6||this.#_.contentWindow?.postMessage(JSON.stringify(e),t??"*")}#B(e){const t=this.getOrigin();if(!(null!==e.source&&e.source!==this.#_?.contentWindow||(0,r.isString)(t)&&t!==e.origin)){try{const t=JSON.parse(e.data);return void(t&&this.onMessage(t,e))}catch(e){}e.data&&this.onMessage(e.data,e)}}}},888:(e,t,s)=>{s.d(t,{getVimeoVideoInfo:()=>a,resolveVimeoVideoId:()=>o});const i=/(?:https:\/\/)?(?:player\.)?vimeo(?:\.com)?\/(?:video\/)?(\d+)(?:(?:\?hash=|\?h=|\/)(.*))?/,r=new Map,n=new Map;function o(e){const t=e.match(i);return{videoId:t?.[1],hash:t?.[2]}}async function a(e,t,s){if(r.has(e))return r.get(e);if(n.has(e))return n.get(e);let i=`https://vimeo.com/api/oembed.json?url=https://player.vimeo.com/video/${e}`;s&&(i=i.concat(`?h=${s}`));const o=window.fetch(i,{mode:"cors",signal:t.signal}).then((e=>e.json())).then((t=>{const s=t?.thumbnail_url?.match(/vimeocdn.com\/video\/(.*)?_/)?.[1],i=s?`https://i.vimeocdn.com/video/${s}_1920x1080.webp`:"",n={title:t?.title??"",duration:t?.duration??0,poster:i,pro:"basic"!==t.account_type};return r.set(e,n),n})).finally((()=>n.delete(e)));return n.set(e,o),o}}}]);